<% if @restaurants.any? %>

  <% @restaurants.each do |restaurant| %>

    <h2><%= link_to restaurant.name, restaurant_path(restaurant) %></h2>
    <h2><%= link_to "Edit #{restaurant.name}", edit_restaurant_path(restaurant) %></h2>
    <h2><%= link_to "Delete #{restaurant.name}", restaurant_path(restaurant), method: :delete %></h2>

    <% if restaurant.reviews.any? %>
      <% restaurant.reviews.all.each do |review| %>
        <p><%= review.thoughts %></p>
        <p><%= link_to "Endorse Review", review_endorsements_path(review), method: :post %></p>
        <p><%= pluralize review.endorsements.count, 'endorsement' %></p>
        <% end %>
    <% end %>

    <% if current_user %>
      <% unless current_user.has_reviewed?(restaurant) %>
        <%= link_to "Review #{restaurant.name}", new_restaurant_review_path(restaurant) %>
      <% end %>
    <% end %>

  <% end %>

<% else %>
  <h1>No restaurants yet</h1>
<% end %>

<% if user_signed_in? %>
  <%= link_to "Add a restaurant", new_restaurant_path %>
<% end %>
